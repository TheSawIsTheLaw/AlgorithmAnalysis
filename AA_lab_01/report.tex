\documentclass[12pt]{report}
\usepackage[utf8]{inputenc}
\usepackage[russian]{babel}
%\usepackage[14pt]{extsizes}
\usepackage{listings}

% Для листинга кода:
\lstset{ %
language=python,                 % выбор языка для подсветки (здесь это С)
basicstyle=\small\sffamily, % размер и начертание шрифта для подсветки кода
numbers=left,               % где поставить нумерацию строк (слева\справа)
numberstyle=\tiny,           % размер шрифта для номеров строк
stepnumber=1,                   % размер шага между двумя номерами строк
numbersep=5pt,                % как далеко отстоят номера строк от подсвечиваемого кода
showspaces=false,            % показывать или нет пробелы специальными отступами
showstringspaces=false,      % показывать или нет пробелы в строках
showtabs=false,             % показывать или нет табуляцию в строках
frame=single,              % рисовать рамку вокруг кода
tabsize=2,                 % размер табуляции по умолчанию равен 2 пробелам
captionpos=t,              % позиция заголовка вверху [t] или внизу [b] 
breaklines=true,           % автоматически переносить строки (да\нет)
breakatwhitespace=false, % переносить строки только если есть пробел
escapeinside={\#*}{*)}   % если нужно добавить комментарии в коде
}

% Для измененных титулов глав:
\usepackage{titlesec, blindtext, color} % подключаем нужные пакеты
\definecolor{gray75}{gray}{0.75} % определяем цвет
\newcommand{\hsp}{\hspace{20pt}} % длина линии в 20pt
% titleformat определяет стиль
\titleformat{\chapter}[hang]{\Huge\bfseries}{\thechapter\hsp\textcolor{gray75}{|}\hsp}{0pt}{\Huge\bfseries}


% plot
\usepackage{pgfplots}
\usepackage{filecontents}
\usetikzlibrary{datavisualization}
\usetikzlibrary{datavisualization.formats.functions}
\begin{filecontents}{LevR.dat}
3 0.00006
4 0.00033
5 0.00033
6 0.00780
7 0.03876
8 0.20780
9 1.18171
\end{filecontents}

\begin{filecontents}{LevT.dat}
3 0.00003
4 0.00003
5 0.00005
6 0.00005
7 0.00007
8 0.00008
9 0.00009
\end{filecontents}

\begin{filecontents}{DamLevR.dat}
3 0.00006
4 0.00027
5 0.00143
6 0.00787
7 0.04130
8 0.23259
9 1.26665
\end{filecontents}

\begin{filecontents}{DamLevT.dat}
3 0.00003
4 0.00003
5 0.00005
6 0.00006
7 0.00007
8 0.00013
9 0.00012
\end{filecontents}


\begin{document}
%\def\chaptername{} % убирает "Глава"
\begin{titlepage}
	\fontsize{12pt}{12pt}\selectfont
	\noindent \begin{minipage}{0.15\textwidth}
		\includegraphics[width=\linewidth]{inc/img/b_logo.jpg}
	\end{minipage}
	\noindent\begin{minipage}{0.9\textwidth}\centering
		\textbf{Министерство науки и высшего образования Российской Федерации}\\
		\textbf{Федеральное государственное бюджетное образовательное учреждение высшего образования}\\
		\textbf{«Московский государственный технический университет имени Н.Э.~Баумана}\\
		\textbf{(национальный исследовательский университет)»}\\
		\textbf{(МГТУ им. Н.Э.~Баумана)}
	\end{minipage}
	
	\noindent\rule{15cm}{3pt}
	\newline\newline
	\noindent ФАКУЛЬТЕТ \underline{~~~~~~~~~~~~~~~~«Информатика и системы управления»~~~~~~~~~~~~~~~~} \newline\newline
	\noindent КАФЕДРА \underline{«Программное обеспечение ЭВМ и информационные технологии»}\newline\newline\newline\newline\newline\newline\newline
	
	
	\begin{center}
		\Large\textbf{Отчет по лабораторной работе №1 по курсу "Анализ алгоритмов"}\newline
	\end{center}
	
	\noindent\textbf{Тема} \underline{Расстояния Левенштейна и Дамерау-Левенштейна}\newline\newline\newline
	\noindent\textbf{Студент} \underline{Якуба Д. В.}\newline\newline
	\noindent\textbf{Группа} \underline{ИУ7-53Б}\newline\newline
	\noindent\textbf{Оценка (баллы)} \underline{~~~~~~~~~~~~~~~~~~~}\newline\newline
	\noindent\textbf{Преподаватели} \underline{Волкова Л.Л., Строганов Ю.В.}\newline
	
	\begin{center}
		\vfill
		Москва~---~\the\year
		~г.
	\end{center}
\end{titlepage}


\tableofcontents

\newpage
\chapter*{Введение}
\addcontentsline{toc}{chapter}{Введение}
\section*{Цель лабораторной работы}
Изучение и реализация алгоритмов нахождения расстояния Левенштейна и Дамерау-Левенштейна.
\section*{Определение}
Расстояние Левенштейна - это мера, определяющая различие двух последовательностей символов. По неформальному определению расстояние Левенштейна между двумя словами - это мимнимальное количество односимвольных изменений (вставок, удалений или замен), необходимых для преобразования одного слова в другое.

Расстояние Левенштейна применяется в теории информации и компьютерной лингвистике для:

\begin{itemize}
	\item Авто-исправления ошибок в слове
	\item Сравнение введёных строк со словарными в поисковых запросах
	\item Сравнения текстовых файлов утилитой diff
	\item В биоинформатике для сравнения генов, хромосом и белков
\end{itemize}

Расстояние Дамерау-Левенштейна - это также мера, определяющая различие двух последовательностей символов, однако набор доступных операций для преобразований строк расширяется - добавляется операция транспозиции (перестановка двух соседствующих символов).

\section*{Задачи лабораторной работы}
Задачами данной лабораторной являются:
\begin{enumerate}
  	\item Изучение алгоритмов Левенштейна и Дамерау-Левенштейна;
	\item Применение метода динамического программирования для реализации указанных алгоритмов; 
	\item Получение практических навыков реализации алгоритмов Левенштейна и Дамерау-Левенштейна; 
	\item Сравнительный анализ реализованных алгоритмов; 
	\item Подготовка отчёта по проведённой работе. 
\end{enumerate}


\chapter{Аналитическая часть}
Расстояние Левенштейна - это минимальное ннобходимое количество операций (вставки, замены, удаления) редакторских операций для преобразования одной строки в другую.

При нахождении расстояния Дамерау — Левенштейна добавляется операция транспозиции (перестановки соседствующих символов).  
 
\textbf{Обозначение редакторских операций:} 
\begin{enumerate}
	\item I - вставка символа;
	\item R - замена символа;
	\item D - удаление символа;
	\item M - бездействие (совпадение символов);
\end{enumerate}

\section{Рекурсивный алгоритм нахождения расстояния Левенштейна}
Пусть $s_{1}$ и $s_{2}$ — две некоторые строки. Тогда расстояние Левенштейна может быть вычислено по формуле \ref{recAlg}

\begin{equation}
\label{recAlg}
\begin{displaymath}
D(i,j) = \left\{ \begin{array}{ll}
 0 & \textrm{$i = 0, j = 0$}\\
 i & \textrm{$j = 0, i > 0$}\\
 j & \textrm{$i = 0, j > 0$}\\
min(\\
D(i,j-1)+1\\
D(i-1, j) +1 &\textrm{$j>0, i>0$}\\
D(i-1, j-1) + m(s_{1}[i], s_{2}[j])\\
)
  \end{array} \right.
  \end{equation}
\end{displaymath}
где функция $m(x,y)$ ($x$ и $y$ - символы) равна нулю, если $a=b$, и единице в противном случае; $x[i]$ - это $i$-ый символ строки $x$.

При этом очевидны следующие факты:
\begin{enumerate}
	\item $D(s_{1}, s_{2})$ \geq $ ||s_{1}| - |s_{2}||$
	\item $D(s_{1}, s_{2})$ \leq $ max(|s_{1}|, |s_{2}|)$
	\item $D(s_{1}, s_{2}) = 0$ \Leftrightarrow $ s_{1} = s_{2}$
\end{enumerate}
%
%Расстояние Дамерау-Левенштейна вычисляется по следующей рекуррентной формуле:
%\begin{displaymath}
%D(i,j) = \left\{ \begin{array}{ll}
% 0, & \textrm{$i = 0, j = 0$}\\
% i, & \textrm{$j = 0, i > 0$}\\
% j, & \textrm{$i = 0, j > 0$}\\
%min(\\
%D(i,j-1)+1,\\
%D(i-1, j) +1, &\textrm{$j>0, i>0$}\\
%D(i-1, j-1) + m(S_{1}[i], S_{2}[j])\\
%D(i-2, j-2) + 1, &\textrm{if $i,j>1$ and $a_{i} = b_{j-1},a_{i-1}=b_{j} $}\\
%)
%  \end{array} \right.
%\end{displaymath}
%


\chapter{Конструкторская часть}
\textbf{Требования к вводу:}
\begin{enumerate}
  	\item На вход подаются две строки
	\item uppercase и lowercase буквы считаются разными
\end{enumerate}
\textbf{Требования к программе:}
\begin{enumerate}
  	\item Две пустые строки - корректный ввод, программа не должна аварийно завершаться
\end{enumerate}


\chapter{Технологическая часть}
\section{Выбор ЯП}
В качестве языка программирования был выбран python т.к. я знакома с данным языком, имею представление о способах тестирования программы в рамках данного языка.

Время работы алгоритмов было замерено с помощью функции time() из библиотеки time.

\section{Сведения о модулях программы}
Программа состоит из:
\begin{itemize}
	\item main.py - главный файл программы, в котором располагаются алгоритмы и меню
	\item test.py - файл с тестами 
\end{itemize}

\begin{lstlisting}[label=some-code,caption=Функция нахождения расстояния Левенштейна рекурсивно]
def LevRecursion(str1, str2, output = False):
    if str1 ==  '' or str2 == '':
        return abs(len(str1) - len(str2))
    forfeit = 0 if (str1[-1] == str2[-1]) else 1
    return min(LevRecursion(str1, str2[:-1]) + 1,
               LevRecursion(str1[:-1], str2) + 1,
               LevRecursion(str1[:-1], str2[:-1]) + forfeit)
\end{lstlisting}

\begin{lstlisting}[label=some-code,caption=Функция нахождения расстояния Левенштейна матрично]
def LevTable(str1, str2, output = False):
    len_i = len(str1) + 1
    len_j = len(str2) + 1
    table = [[i + j for j in range(len_j)] for i in range(len_i)]
    
    for i in range(1, len_i):
        for j in range(1, len_j):
            forfeit = 0 if (str1[i - 1] == str2[j - 1]) else 1
            table[i][j] = min(table[i - 1][j] + 1,
                              table[i][j - 1] + 1,
                              table[i - 1][j - 1] + forfeit)
    if output:        
        OutputTable(table, str1, str2)
    return(table[-1][-1])
\end{lstlisting}

\begin{lstlisting}[label=some-code,caption=Функция нахождения расстояния Дамерау-Левенштейна рекурсивно]
def DamLevRecursion(str1, str2, output = False):
    if str1 ==  '' or str2 == '':
        return abs(len(str1) - len(str2))
    forfeit = 0 if (str1[-1] == str2[-1]) else 1
    res = min(DamLevRecursion(str1, str2[:-1]) + 1,
              DamLevRecursion(str1[:-1], str2) + 1,
              DamLevRecursion(str1[:-1], str2[:-1]) + forfeit)
    if (len(str1) >= 2 and len(str2) >= 2 and str1[-1] == str2[-2] and str1[-2] == str2[-1]):
        res = min(res, DamLevRecursion(str1[:-2], str2[:-2]) + 1)
    return res 
\end{lstlisting}

\begin{lstlisting}[label=some-code,caption=Функция нахождения расстояния Дамерау-Левенштейна матрично]
def DamLevTable(str1, str2, output = False):
    len_i = len(str1) + 1
    len_j = len(str2) + 1
    table = [[i + j for j in range(len_j)] for i in range(len_i)]
    
    for i in range(1, len_i):
        for j in range(1, len_j):
            forfeit = 0 if (str1[i - 1] == str2[j - 1]) else 1
            table[i][j] = min(table[i - 1][j] + 1,
                              table[i][j - 1] + 1,
                              table[i - 1][j - 1] + forfeit)
            if (i > 1 and j > 1) and str1[i-1] == str2[j-2] and str1[i-2] == str2[j-1]:
                table[i][j] = min(table[i][j], table[i-2][j-2] + 1)
    if output:        
        OutputTable(table, str1, str2)
    return(table[-1][-1])
\end{lstlisting}

\section{Тесты}
Тестирование было организовано с помощью библиотеки  \textbf{unittest}.
Было создано две вариации тестов:

В первой сравнивались результаты функции с реальным результатом.

Во второй сравнивались реузультаты двух функций(рекурсивной и табличной).
При сравнении результатов двух функций использовалась функция RandomString, которая генерирует случайную строку нужной длины.

\begin{lstlisting}[label=randStr,caption=Функция генерации случайной строки]
def RandomString(strLength = 5):
    letters = string.ascii_lowercase
    return ''.join(random.choice(letters) for i in range(strLength))
\end{lstlisting}


\chapter{Исследовательская часть}


Был проведен замер времени работы каждого из алгоритмов.

\begin{center}
	\begin{tabular}{|c c c c c|} 
 	\hline
	len & Lev(R) & DamLev(R) & Lev(T) & DamLev(T) \\ [0.5ex] 
 	\hline\hline
 	3 & 0.00006 & 0.00006 & 0.00003 & 0.00003\\
 	\hline
 	4 & 0.00033 & 0.00027 & 0.00003 & 0.00003\\
 	\hline
	5 & 0.00141 & 0.00143 & 0.00005 & 0.00005\\
	\hline
	6 & 0.00780 & 0.00787 & 0.00005 & 0.00006\\
	\hline
	7 & 0.03876 & 0.04130 & 0.00007 & 0.00007\\
	\hline
	8 & 0.20780 & 0.23259 & 0.00008 & 0.00013\\
	\hline
	9 & 1.18171 & 1.26665 & 0.00009 & 0.00012\\
	\hline
	\end{tabular}
\end{center}





\begin{tikzpicture}

\begin{axis}[
    	axis lines = left,
    	xlabel = $len$,
    	ylabel = {$time$},
	legend pos=north west,
	ymajorgrids=true
]
\addplot[color=red] table[x index=0, y index=1] {LevR.dat}; 
\addplot[color=orange] table[x index=0, y index=1] {DamLevR.dat};
\addplot[color=blue, mark=square] table[x index=0, y index=1] {LevT.dat};
\addplot[color=green, mark=square] table[x index=0, y index=1] {DamLevT.dat};

\addlegendentry{LevR}
\addlegendentry{DamLevR}
\addlegendentry{LevT}
\addlegendentry{DamLevT}
\end{axis}
\end{tikzpicture}


\par
Рекурсивные реализации сравнимы по времени между собой. При увеличении длины строк становится очевидна выигрышность по времени матричного варианта. Уже при длине в 9 символов матричная реализация в 10,000 раз быстрее.

\chapter*{Заключение}
\addcontentsline{toc}{chapter}{Заключение}
Был изучен метод динамического программирования на материале алгоритмов Левенштейна и Дамерау-Левенштейна.
Также изучены алгоритмы Левенштейна и Дамерау-Левенштейна нахождения расстояния между строками, получены практические навыки раелизации указанных алгоритмов
в матричной  и рекурсивных версиях. 

Экспериментально было подтверждено различие во временной эффективности рекурсивной и нерекурсивной реализаций выбранного алгоритма определения расстояния между строками при помощи разработаного программного обеспечения на материале замеров процессорного времени выполнения реализации на варьирующихся длинах строк. 

В результате исследований пришла к выводу, что матричная реализация данных алгоритмов заметно выигрывает по времени при росте длины строк.


\end{document} 
